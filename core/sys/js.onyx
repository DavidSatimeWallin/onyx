package system

use package core
use package main as main

output_str :: proc (s: str) -> u32 #foreign "host" "print_str" ---

// The builtin _start proc.
// Sets up everything needed for execution.
proc () #export "_start" {
    alloc.init();

    context.allocator = alloc.heap_allocator;
    context.temp_allocator = alloc.temp_allocator;

    args : [] cstr;
    args.data  = null;
    args.count = 0;

    stdio_init();

    main.main(args);

    print_buffer_flush();
}
